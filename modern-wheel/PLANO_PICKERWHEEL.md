# Plano de Implementação — Recursos estilo PickerWheel\n\nLink de referência: https://pickerwheel.com/\n\n## Estado atual resumido\n- Roda funcional com giro, som de término e confete opcional.\n- Persistência em localStorage para itens e configurações principais (duração do giro, som, confete).\n- Principais componentes: `src/components/WheelComponent.tsx` e `src/components/ClientApp.tsx`.\n\n## Objetivo geral\nExpandir as funcionalidades para se aproximar do PickerWheel, começando pelo Painel de Entradas (CRUD, reordenação, duplicação, ocultar/mostrar, embaralhar, importação em massa) e seleção ponderada (pesos). Em etapas seguintes, adicionar configurações de giro avançadas, histórico/resultados, imagens e melhorias visuais.\n\n---\n\n## Milestone 1 — Painel de Entradas (Inputs) + Pesos\n\n### Escopo\n1) CRUD de itens\n- Adicionar novo item\n- Editar inline (texto)\n- Duplicar item\n- Ocultar/mostrar item (sem removê-lo)\n- Excluir item\n\n2) Reordenação\n- Versão 1: botões \"subir\"/\"descer\" para mover itens.\n- Versão 2 (futuro): arrastar e soltar com biblioteca DnD.\n\n3) Funções rápidas\n- Shuffle (embaralhar a lista).\n- Ocultar/mostrar painel (foco na roda).\n\n4) Importação/Exportação em massa\n- Modal com textarea: 1 item por linha (ou CSV simples).\n- Importar substituindo ou anexando à lista atual.\n- Exportar/copy-all (texto).\n\n5) Pesos por item (seleção ponderada)\n- Campo `weight` (inteiro >= 1, default 1).\n- Utilizado apenas para seleção do resultado (probabilidade), sem alterar o tamanho visual das fatias na primeira versão.\n\n### Modelo de dados\nInterface proposta para itens:\n\n```ts\nexport interface WheelItem {\n  id: string;\n  label: string;\n  hidden: boolean;\n  weight: number; // default: 1\n  imageUrl?: string; // reservado para Milestone 4\n}\n```\n\nEstrutura de estado (alto nível) em `ClientApp`:\n\n```ts\nitems: WheelItem[]\nconfig: {\n  soundEnabled: boolean;\n  confettiEnabled: boolean;\n  spinDuration: number;\n}\n```\n\n### Persistência e migração\n- Manter chaves atuais do localStorage.\n- Migração: se encontrar um array simples de `string`, converter para `WheelItem` com defaults (`hidden=false`, `weight=1`).\n- Validar e normalizar dados ao carregar (ex.: weight < 1 => 1).\n\n### Seleção ponderada (algoritmo)\n1. Filtrar itens não ocultos e com `weight >= 1`.\n2. Somar pesos: `total = sum(weights)`.\n3. Gerar `r` em `[0, total)`.\n4. Percorrer acumulando pesos e selecionar o primeiro cujo acumulado ultrapasse `r`.\n\n### Arquivos/Componentes\n- Criar `src/types/wheel.ts` (tipos compartilhados).\n- Criar `src/components/InputsPanel.tsx` (UI do painel e ações).\n- Atualizar `src/components/ClientApp.tsx` (estado, persistência, callbacks e integração com painel e roda).\n- Atualizar `src/components/WheelComponent.tsx` (usar filtro de ocultos e seleção ponderada; manter lógica atual de som/áudio e confete).\n\n### UX/Detalhes\n- Edição inline acessível (Enter para salvar, ESC para cancelar).\n- Botões discretos: duplicar, ocultar/mostrar, excluir, subir/descer.\n- Validações: texto não vazio; peso mínimo 1; limitar tamanho do texto (ex.: 80 chars).\n- Feedback: toasts simples (opcional) ou mensagens inline.\n\n### Testes manuais\n- CRUD básico e persistência após recarregar a página.\n- Reordenação funciona e persiste.\n- Shuffle não duplica/perde itens.\n- Importação em massa: linhas vazias ignoradas; CSV simples tratado; export gera texto fiel.\n- Pesos: com valores diferentes, probabilidade perceptível em múltiplos giros.\n\n---\n\n## Milestone 2 — Configurações de Giro (Avançadas)\n- Velocidade/perfil de easing (ex.: ease-out, expo).\n- Ângulo inicial aleatório por giro.\n- Parada manual (botão de stop com desaceleração).\n- Modo \"não repetir\" até reset (opcional).\n- Contagem de giros consecutivos (ex.: melhor de N).\n\n---\n\n## Milestone 3 — Resultados e Histórico\n- Guardar histórico de resultados (com timestamp).\n- Contagem por item (estatística simples).\n- Limpar histórico, exportar CSV/Texto.\n- Mostrar últimos N resultados em painel lateral.\n\n---\n\n## Milestone 4 — Imagens e Visual/UX\n- Imagem opcional por item (`imageUrl`), render na fatia (tamanho limitado).\n- Temas/cores; botão para esconder/mostrar painel.\n- Fullscreen opcional; intensidade do confete; volume dos sons.\n\n---\n\n## Roteiro de implementação (ordem sugerida)\n1) Tipos e migração (\"wheel.ts\").\n2) InputsPanel (CRUD + reordenação + ocultar/duplicar/excluir).\n3) Shuffle e Import/Export em massa.\n4) Pesos e seleção ponderada na roda.\n5) Ajustes de UX e validações.\n\nCommits pequenos e testáveis a cada passo.\n\n---\n\n## Checklist de validação\n- [ ] Nenhum item com texto vazio ou peso inválido é salvo.\n- [ ] Painel funciona bem em mobile (toques, foco, rolagem).\n- [ ] Recarregar a página mantém dados e ordem.\n- [ ] Giro respeita ocultos e pesos.\n- [ ] Import/Export funcionam sem corromper estado.\n\n---\n\n## Próximos passos\n- Implementar Milestone 1 no código: criar `types/wheel.ts`, o novo `InputsPanel.tsx`, adaptar `ClientApp.tsx` (estado e persistência) e ajustar `WheelComponent.tsx` para seleção ponderada/ocultos.\n- Após concluir, validar com você e seguir para Milestone 2.\n